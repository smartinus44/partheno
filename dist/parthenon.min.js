(function(e){var t={};function i(a){if(t[a]){return t[a].exports}var n=t[a]={i:a,l:false,exports:{}};e[a].call(n.exports,n,n.exports,i);n.l=true;return n.exports}i.m=e;i.c=t;i.d=function(e,t,a){if(!i.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:a})}};i.r=function(e){Object.defineProperty(e,"__esModule",{value:true})};i.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};i.d(t,"a",t);return t};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};i.p="";return i(i.s=0)})([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function r(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}var s="#FF0000";var l=1;var c=function(){function e(t,i,n,r,s,l,c,o,h,u,f,d){a(this,e);this.images=[];this.numberOfPairOfTriangles=3;this.patterns=f;this.height=i;this.width=n;if(!r)this.backgroundPattern=this.getRandomPattern("background");else this.backgroundPattern=r;if(!l)this.triangleEvenPattern=this.getRandomPattern("triangles");else this.triangleEvenPattern=l;if(!c)this.triangleOddPattern=this.getRandomPattern("triangles");else this.triangleOddPattern=c;this.numberOfPairOfTriangles=s;this.showStrokes=o;this.columnsPerWidth=h;this.canDownload=u;this.chamfer=d;this.el_canvas=this.createCanvas("canva-"+t,"zone-"+t);if(this.canDownload===true)this.createDownloadLink(t);this.el_ctx=this.el_canvas.getContext("2d");this.initPatterns("triangles");this.initPatterns("background")}r(e,[{key:"getRandomPattern",value:function e(t){var i=Math.floor(Math.random()*this.patterns[t].length);return this.patterns[t][i]}},{key:"setBackgroundPattern",value:function e(t){this.el_ctx.fillStyle=this.images[t];if(this.chamfer>0){this.chamferedRect(0,0,this.el_canvas.width,this.el_canvas.height,this.chamfer,false,false,false,false);this.el_ctx.fill()}else{this.el_ctx.fillRect(0,0,this.el_canvas.width,this.el_canvas.height)}}},{key:"roundRect",value:function e(t,i,a,n,r,s,l,c,o){var h=t+a;var u=i+n;this.el_ctx.beginPath();this.el_ctx.strokeStyle="green";this.el_ctx.lineWidth="2";if(s){if(l){this.el_ctx.moveTo(t,i)}else{this.el_ctx.moveTo(t+r,i)}this.el_ctx.lineTo(h-r,i);this.el_ctx.quadraticCurveTo(h,i,h,i+r)}else{if(o){this.el_ctx.moveTo(t+r,i)}else{this.el_ctx.moveTo(t,i)}this.el_ctx.lineTo(h,i)}if(c){this.el_ctx.lineTo(h,i+n-r);this.el_ctx.quadraticCurveTo(h,u,h-r,u)}else{this.el_ctx.lineTo(h,i+n)}if(l){this.el_ctx.lineTo(t+r,u);this.el_ctx.quadraticCurveTo(t,u,t,u-r)}else{this.el_ctx.lineTo(t,u)}if(o){this.el_ctx.lineTo(t,i+r);this.el_ctx.quadraticCurveTo(t,i,t+r,i)}else{this.el_ctx.lineTo(t,i)}this.el_ctx.stroke()}},{key:"chamferedRect",value:function e(t,i,a,n,r,s,l,c,o){var h=t+a;var u=i+n;this.el_ctx.moveTo(t+r,i);this.el_ctx.lineTo(h-r,i);this.el_ctx.lineTo(h,i+r);this.el_ctx.lineTo(h,i+n-r);this.el_ctx.lineTo(h-r,u);this.el_ctx.lineTo(t+r,u);this.el_ctx.lineTo(t,u-r);this.el_ctx.lineTo(t,i+r);this.el_ctx.lineTo(t+r,i)}},{key:"createCanvas",value:function e(t,i){var a=document.createElement("canvas");a.innerHTML="Votre navigateur ne supporte pas canvas.<br>Essayez avec Firefox, Safari, Chrome ou Opera.";var n=document.getElementById(i);a.id=t;a.width=this.width;a.height=this.height;a.showStrokes=this.showStrokes;a.chamfer=this.chamfer;a.backgroundPatternTriangleEven=this.triangleEvenPattern;a.backgroundPatternTriangleOdd=this.triangleOddPattern;n.appendChild(a);this.clearCanvasLayers();return a}},{key:"clearCanvasLayers",value:function e(){if(this.el_canvas){var t=this.el_canvas.clientWidth;var i=this.el_canvas.clientHeight;this.el_ctx.clearRect(0,0,t,i)}}},{key:"initPatterns",value:function e(t){var i=this.patterns[t].length;var a=this;this.patterns[t].forEach(function(e){var t=encodeURI(e);var n=new Image;n.onload=function(){a.images[t]=a.el_ctx.createPattern(n,"repeat");--i;if(i===0)a._onPatternsLoaded()};n.src=t})}},{key:"createDownloadLink",value:function e(t){var i=document.getElementById("zone-"+t);var a=document.createElement("a");var n=this;a.innerHTML="Download the picture";a.className="btn btn-dark";a.href="#";a.role="button";a.addEventListener("click",function(){a.href=n.el_canvas.toDataURL();a.download="bookmark.jpg"},false);i.insertBefore(document.createElement("br"),i.firstChild);i.insertBefore(document.createElement("br"),i.firstChild);var r=document.createElement("textarea");r.cols=80;r.rows=10;r.readOnly=true;r.innerHTML=JSON.stringify(n);i.insertBefore(a,i.firstChild)}},{key:"drawTriangles",value:function e(){if(this.el_canvas.chamfer>0){this.el_ctx.clip()}var t;var i=this.el_canvas.width/this.columnsPerWidth;var a=i/2;for(var n=1;n<=this.numberOfPairOfTriangles;n++){for(var r=0;r<this.columnsPerWidth;r++){t=this.el_canvas.height/(this.numberOfPairOfTriangles*2);this.el_ctx.lineWidth=l;var c=r*i;var o=2*(t*n-t);var h=o+2*t;var u=(h-t)/n*n;for(var f=1;f<=2;f++){this.el_ctx.beginPath();this.el_ctx.moveTo(a+c,u);if(f%2===1){this.el_ctx.fillStyle=this.images[this.el_canvas.backgroundPatternTriangleEven];this.el_ctx.lineTo(i+c,o);this.el_ctx.lineTo(c,o)}else{this.el_ctx.fillStyle=this.images[this.el_canvas.backgroundPatternTriangleOdd];this.el_ctx.lineTo(i+c,h);this.el_ctx.lineTo(c,h)}this.el_ctx.closePath();if(this.el_canvas.showStrokes===true){this.el_ctx.strokeStyle=s;this.el_ctx.stroke()}this.el_ctx.fill()}}}if(this.el_canvas.chamfer>0){this.el_ctx.restore()}}},{key:"_onPatternsLoaded",value:function e(){this.clearCanvasLayers();this.setBackgroundPattern(this.backgroundPattern);this.drawTriangles()}}]);return e}();t.default=c}]);